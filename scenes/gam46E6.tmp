[gd_scene load_steps=28 format=3 uid="uid://rnmcx0o0hdgb"]

[ext_resource type="Script" path="res://scenes/game.gd" id="1_3n5gp"]
[ext_resource type="Script" path="res://player/player.gd" id="2_kyivt"]
[ext_resource type="Script" path="res://player/player_camera.gd" id="3_6ujgl"]
[ext_resource type="Script" path="res://scenes/player_ants.gd" id="4_nc8uk"]
[ext_resource type="Script" path="res://scenes/enemy_ants.gd" id="5_1xiir"]
[ext_resource type="Script" path="res://entities/player_camp.gd" id="6_bdu2w"]
[ext_resource type="Script" path="res://scenes/buildings.gd" id="6_sp1yx"]
[ext_resource type="Script" path="res://entities/terrain.gd" id="7_js5w2"]
[ext_resource type="Script" path="res://scenes/resources.gd" id="8_iuc0h"]
[ext_resource type="PackedScene" uid="uid://dsx7wydm6py7h" path="res://entities/resources/food_resource.tscn" id="9_ugogf"]

[sub_resource type="GDScript" id="GDScript_87ai3"]
script/source = "extends HBoxContainer


func _process(delta: float) -> void:
	$Food.text = \"Food: %5d\" % PlayerCamp.instance.food_capacity
	$Wood.text = \"Wood: %5d\" % PlayerCamp.instance.wood_capacity
	$Stone.text = \"Stone: %5d\" % PlayerCamp.instance.stone_capacity
"

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_e001c"]
width = 16
height = 16

[sub_resource type="PrismMesh" id="PrismMesh_dw2jx"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nljwt"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_kxcis"]
data = PackedVector3Array(0, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0, 0.5, 0.5, 0, 0.5, -0.5, 0.5, -0.5, 0.5, 0, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0, 0.5, -0.5, 0, 0.5, 0.5, -0.5, -0.5, -0.5, 0, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xnv8j"]
albedo_color = Color(0.4, 0.2636, 0.152, 1)

[sub_resource type="SphereMesh" id="SphereMesh_7o2sd"]
material = SubResource("StandardMaterial3D_xnv8j")

[sub_resource type="SphereShape3D" id="SphereShape3D_mhi37"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4n51k"]
albedo_color = Color(0.45, 0.45, 0.45, 1)

[sub_resource type="SphereMesh" id="SphereMesh_jj3r8"]
material = SubResource("StandardMaterial3D_4n51k")

[sub_resource type="BoxShape3D" id="BoxShape3D_y1i3q"]
size = Vector3(100, 0.01, 100)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ob58c"]
albedo_color = Color(0, 0.46, 0.145667, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_alxwk"]
material = SubResource("StandardMaterial3D_ob58c")
size = Vector2(100, 100)

[sub_resource type="NavigationMesh" id="NavigationMesh_6127e"]
vertices = PackedVector3Array(2, 0.480707, -10.75, 3, 0.480707, -11, 3, 0.480707, -49.5, -49.5, 0.480707, -49.5, -49.5, 0.480707, -10, 2, 0.480707, -10, 3.75, 0.480707, -11, 4, 0.480707, -10, 49.5, 0.480707, -10, 49.5, 0.480707, -49.5, 0.5, 0.480707, -1, 0.75, 0.480707, -0.5, 2.5, 0.480707, -9, 2, 0.480707, -9.25, -0.5, 0.480707, -1, -49.5, 0.480707, 0.25, -0.75, 0.480707, 0.25, 3.75, 0.480707, -9, 0.75, 0.480707, 1, 49.5, 0.480707, 1.5, 0.25, 0.480707, 1.25, 0, 0.480707, 49.5, 0, 0.480707, 1.25, -0.75, 0.480707, 1, -49.5, 0.480707, 49.5, 49.5, 0.480707, 49.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(0, 5, 4), PackedInt32Array(6, 1, 2), PackedInt32Array(6, 2, 7), PackedInt32Array(7, 2, 8), PackedInt32Array(8, 2, 9), PackedInt32Array(12, 11, 10), PackedInt32Array(12, 10, 13), PackedInt32Array(13, 10, 14), PackedInt32Array(14, 16, 15), PackedInt32Array(13, 14, 5), PackedInt32Array(5, 14, 4), PackedInt32Array(4, 14, 15), PackedInt32Array(11, 12, 17), PackedInt32Array(11, 17, 18), PackedInt32Array(18, 17, 19), PackedInt32Array(19, 17, 8), PackedInt32Array(17, 7, 8), PackedInt32Array(19, 20, 18), PackedInt32Array(22, 21, 23), PackedInt32Array(23, 21, 24), PackedInt32Array(23, 24, 15), PackedInt32Array(15, 16, 23), PackedInt32Array(22, 20, 21), PackedInt32Array(21, 20, 19), PackedInt32Array(21, 19, 25)]
geometry_parsed_geometry_type = 1
geometry_source_geometry_mode = 1
geometry_source_group_name = &"NavmeshTargets"

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_tx3qi"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_mmhs2"]
sky_material = SubResource("ProceduralSkyMaterial_tx3qi")

[sub_resource type="Environment" id="Environment_r8f2r"]
background_mode = 2
sky = SubResource("Sky_mmhs2")
tonemap_mode = 2
glow_enabled = true

[node name="Game" type="Node"]
script = ExtResource("1_3n5gp")

[node name="HBoxContainer" type="HBoxContainer" parent="."]
offset_right = 40.0
offset_bottom = 40.0
script = SubResource("GDScript_87ai3")

[node name="Food" type="Label" parent="HBoxContainer"]
layout_mode = 2

[node name="Wood" type="Label" parent="HBoxContainer"]
layout_mode = 2

[node name="Stone" type="Label" parent="HBoxContainer"]
layout_mode = 2

[node name="HBoxContainer2" type="VBoxContainer" parent="."]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 40.0
grow_horizontal = 0

[node name="Button" type="Button" parent="HBoxContainer2"]
layout_mode = 2
text = "Add line"

[node name="Player" type="Node" parent="."]
script = ExtResource("2_kyivt")

[node name="PlayerCamera" type="Camera3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 0.965926, 0.258819, 0, -0.258819, 0.965926, 2.38419e-07, 1.98981, 3.94427)
current = true
script = ExtResource("3_6ujgl")

[node name="Sprite3D" type="Sprite3D" parent="Player/PlayerCamera"]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 0, 1, 0)
cast_shadow = 0
axis = 1
billboard = 2
texture = SubResource("NoiseTexture2D_e001c")

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="Player/PlayerCamera"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10, 0)
remote_path = NodePath("../../SubViewportContainer/SubViewport/Camera3D")
update_rotation = false
update_scale = false

[node name="RayCast3D" type="RayCast3D" parent="Player"]
target_position = Vector3(0, 0, 0)
debug_shape_custom_color = Color(0, 0.633333, 1, 1)

[node name="SubViewportContainer" type="SubViewportContainer" parent="Player"]
visible = false
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -255.0
offset_top = -255.0
grow_horizontal = 0
grow_vertical = 0
size_flags_vertical = 3
mouse_filter = 0

[node name="SubViewport" type="SubViewport" parent="Player/SubViewportContainer"]
handle_input_locally = false
size = Vector2i(255, 255)
render_target_update_mode = 0

[node name="Camera3D" type="Camera3D" parent="Player/SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 2.38419e-07, 11.6491, 1.35608)
projection = 1
current = true
size = 20.0

[node name="PlayerAnts" type="Node" parent="."]
script = ExtResource("4_nc8uk")

[node name="EnemyAnts" type="Node" parent="."]
script = ExtResource("5_1xiir")

[node name="Buildings" type="Node" parent="."]
script = ExtResource("6_sp1yx")

[node name="PlayerCamp" type="StaticBody3D" parent="Buildings" groups=["NavmeshTargets"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.480707, 0)
script = ExtResource("6_bdu2w")

[node name="PlayerCamp" type="MeshInstance3D" parent="Buildings/PlayerCamp"]
mesh = SubResource("PrismMesh_dw2jx")
skeleton = NodePath("../../../Terrain/MeshInstance3D")
surface_material_override/0 = SubResource("StandardMaterial3D_nljwt")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Buildings/PlayerCamp"]
shape = SubResource("ConcavePolygonShape3D_kxcis")

[node name="Resources" type="Node" parent="."]
script = ExtResource("8_iuc0h")

[node name="FoodResource" parent="Resources" groups=["NavmeshTargets"] instance=ExtResource("9_ugogf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, -10)

[node name="WoodResource" type="StaticBody3D" parent="Resources" groups=["NavmeshTargets"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.587, 0.388953, -1.42182)

[node name="MeshInstance3D2" type="MeshInstance3D" parent="Resources/WoodResource"]
mesh = SubResource("SphereMesh_7o2sd")
skeleton = NodePath("../../../Terrain/MeshInstance3D")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Resources/WoodResource"]
shape = SubResource("SphereShape3D_mhi37")

[node name="Timer" type="Timer" parent="Resources/WoodResource"]
autostart = true

[node name="StoneResource" type="StaticBody3D" parent="Resources" groups=["NavmeshTargets"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 0.404562, -1)

[node name="MeshInstance3D2" type="MeshInstance3D" parent="Resources/StoneResource"]
mesh = SubResource("SphereMesh_jj3r8")
skeleton = NodePath("../../../Terrain/MeshInstance3D")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Resources/StoneResource"]
shape = SubResource("SphereShape3D_mhi37")

[node name="Timer" type="Timer" parent="Resources/StoneResource"]
autostart = true

[node name="Terrain" type="StaticBody3D" parent="." groups=["NavmeshTargets"]]
script = ExtResource("7_js5w2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Terrain"]
shape = SubResource("BoxShape3D_y1i3q")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Terrain"]
mesh = SubResource("PlaneMesh_alxwk")
skeleton = NodePath("../..")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Terrain"]
navigation_mesh = SubResource("NavigationMesh_6127e")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_r8f2r")

[connection signal="timeout" from="Resources/WoodResource/Timer" to="Resources/WoodResource" method="_on_tick"]
[connection signal="timeout" from="Resources/StoneResource/Timer" to="Resources/StoneResource" method="_on_tick"]
